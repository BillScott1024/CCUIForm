{"version":3,"sources":["UIMaskMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Scripte/UIFormwork","sourcesContent":["import { Node, Transition, Vec2, Canvas } from './../../../creator.d';\n/***\n * \n *    Title: UI框架项目\n *           主题：   UI遮罩管理器  \n *    Description: \n *           功能： 负责“弹出窗体”模态显示实现\n *                  \n *    Date: 2018.6.11\n *    Version: 0.1版本\n *    by : wxy\n *   \n */\n\nimport Constant from './Constant';\nimport CCCompentHelper from './CCCompentHelper';\nconst { ccclass, property } = cc._decorator;\nimport { UIFormType, UIFormShowMode, AnimType, UIFormLucenyType } from './E_UIForm';\n\n@ccclass\nexport default class UIMaskMgr extends cc.Component {\n\n    @property(cc.Label)\n    label: cc.Label = null;\n\n    @property\n    public text: string = 'hello';\n    //根节点Canvas\n    mCanvas: cc.Node = null;\n    //该脚本父节点\n    public mScriptsParentNode: cc.Node = null;\n    //遮罩节点\n    public mMaskPanel: cc.Node = null;\n    mMaskColor: cc.Color = null;\n    private static mInstance = null;\n\n    mMaskStarZinde = 50;\n    mOldMaskZinde: number = 0;\n    public static instance(): UIMaskMgr {\n        if (this.mInstance == null) {\n            let root = cc.find(\"Canvas\");\n            let maskManagerNode = new cc.Node(\"_UIMaskMgr\");\n            this.mInstance = maskManagerNode.addComponent<UIMaskMgr>(UIMaskMgr);\n            root.getChildByName(Constant.mScriptMgr).addChild(maskManagerNode);\n            maskManagerNode.setPosition(0, 0);\n        }\n        return this.mInstance;\n    }\n\n    onLoad() {\n        this.mScriptsParentNode = this.node.parent;\n        this.mCanvas = cc.find(\"Canvas\");\n        let popNode = this.mCanvas.getChildByName(Constant.mPopUp);\n        this.mMaskPanel = CCCompentHelper.FindChildNode(popNode, Constant.m_UIMaskPanel);\n        this.mOldMaskZinde = this.mMaskPanel.zIndex;\n    }\n\n\n\n    /**\n     * 设置遮罩透明样式\n     * @param goDisplayUIForms \n     * @param lucenyType \n     */\n    public SetMaskNode(goDisplayUIForms: cc.Node, lucenyType: UIFormLucenyType) {\n        switch (lucenyType) {\n            case UIFormLucenyType.Lucency:\n                this.mMaskPanel.active = true;\n                this.mMaskPanel.opacity = 0;\n                break;\n            case UIFormLucenyType.Translucence:\n                this.mMaskPanel.active = true;\n                this.mMaskPanel.opacity = 125;\n                break;\n            case UIFormLucenyType.ImPenetrable:\n                this.mMaskPanel.active = true;\n                this.mMaskPanel.opacity = 90;\n                break;\n            case UIFormLucenyType.Pentrate:\n                if (this.mMaskPanel.active) {\n                    this.mMaskPanel.active = false;\n                }\n                break;\n            case UIFormLucenyType.NoLucency:\n                this.mMaskPanel.opacity = 255;\n                break;\n\n        }\n        this.mMaskPanel.zIndex = this.mMaskStarZinde;\n        this.mMaskStarZinde += 1;\n        goDisplayUIForms.zIndex = this.mMaskStarZinde;\n    }\n\n\n\n    /**\n     * 关闭遮罩\n     */\n    public CancelMaskNode() {\n        if (this.mMaskPanel.active) {\n            this.mMaskStarZinde = 50;\n            this.mMaskPanel.zIndex = this.mOldMaskZinde;\n            this.mMaskPanel.active = false;\n        }\n    }\n\n}\n"]}